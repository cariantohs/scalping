<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - Crypto Tracker</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <div class="auth-box">
            <div class="tabs">
                <button id="login-tab" class="active">Login</button>
                <button id="register-tab">Daftar</button>
            </div>
            
            <div id="login-form" class="form active">
                <h2>Login ke Crypto Tracker</h2>
                <input type="email" id="login-email" placeholder="Email" required>
                <input type="password" id="login-password" placeholder="Password" required>
                <button id="login-btn">Login</button>
                <div id="login-error" class="error"></div>
            </div>
            
            <div id="register-form" class="form">
                <h2>Buat Akun Baru</h2>
                <input type="text" id="register-name" placeholder="Nama Lengkap" required>
                <input type="email" id="register-email" placeholder="Email" required>
                <input type="password" id="register-password" placeholder="Password (min. 6 karakter)" required>
                <button id="register-btn">Daftar</button>
                <div id="register-error" class="error"></div>
            </div>
        </div>
        <div class="info">
            <h1>Crypto Tracker</h1>
            <p>Pantau harga XAUT-USDT secara real-time dengan analisis mendalam</p>
            <ul>
                <li>Harga real-time dari CoinMarketCap</li>
                <li>Grafik interaktif Line & Candlestick</li>
                <li>Analisis teknikal otomatis</li>
                <li>Data tersimpan di Firebase</li>
            </ul>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore-compat.js"></script>
    <script src="firebase.js"></script>
    <script>
        // DOM Elements
        const loginTab = document.getElementById('login-tab');
        const registerTab = document.getElementById('register-tab');
        const loginForm = document.getElementById('login-form');
        const registerForm = document.getElementById('register-form');
        const loginBtn = document.getElementById('login-btn');
        const registerBtn = document.getElementById('register-btn');
        const loginError = document.getElementById('login-error');
        const registerError = document.getElementById('register-error');

        // Tab switching
        loginTab.addEventListener('click', () => {
            loginTab.classList.add('active');
            registerTab.classList.remove('active');
            loginForm.classList.add('active');
            registerForm.classList.remove('active');
        });

        registerTab.addEventListener('click', () => {
            registerTab.classList.add('active');
            loginTab.classList.remove('active');
            registerForm.classList.add('active');
            loginForm.classList.remove('active');
        });

        // Login functionality
        loginBtn.addEventListener('click', () => {
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;
            
            firebase.auth().signInWithEmailAndPassword(email, password)
                .then(() => {
                    window.location.href = 'dashboard.html';
                })
                .catch(error => {
                    loginError.textContent = error.message;
                });
        });

        // Register functionality
        registerBtn.addEventListener('click', () => {
            const name = document.getElementById('register-name').value;
            const email = document.getElementById('register-email').value;
            const password = document.getElementById('register-password').value;
            
            if (password.length < 6) {
                registerError.textContent = 'Password minimal 6 karakter';
                return;
            }
            
            firebase.auth().createUserWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    // Save additional user info to Firestore
                    return firebase.firestore().collection('users').doc(userCredential.user.uid).set({
                        name: name,
                        email: email,
                        createdAt: firebase.firestore.FieldValue.serverTimestamp()
                    });
                })
                .then(() => {
                    window.location.href = 'dashboard.html';
                })
                .catch(error => {
                    registerError.textContent = error.message;
                });
        });
    </script>
</body>
</html>
